(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{1077:(e,t,l)=>{Promise.resolve().then(l.bind(l,7408))},7408:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>m});var r=l(5155),s=l(2115);let a={id:1,name:"Mihir"};function n(e){let{users:t,items:l,itemsToUser:n,extraFee:c,billPaid:i,billTotal:d}=e,[h,m]=(0,s.useState)([]),x=e=>{if(t)return t.find(t=>t.id==e)},u=e=>{let t=0;return e.map(e=>{t+=e.itemPrice*e.itemQuantity}),t+5*t/100};return(0,s.useEffect)(()=>(n&&n.length>0&&n.map(e=>{var t;let r=null!==(t=x(e.userId))&&void 0!==t?t:a,s=[];e.items&&e.items.length>0&&(e.items.map(e=>{let t=null==l?void 0:l.find(t=>t.id===e.itemId);if(t&&null!=t){let l={itemName:t.name,itemPrice:t.price,itemQuantity:e.quantity};s.push(l)}}),m(e=>[...e,{user:r,items:s}]))}),()=>{m([])}),[n]),(0,s.useEffect)(()=>{console.log("currentItemsToUser: ",h)},[h]),(0,r.jsxs)("table",{className:"table-auto w-full text-center",children:[(0,r.jsxs)("tr",{className:"lg:text-3xl  bg-black text-white dark:bg-white dark:text-black",children:[(0,r.jsx)("th",{className:"border",children:"User"}),(0,r.jsx)("th",{className:"border",children:"Order"})]}),h&&n&&t&&l&&h.length>0&&h.map(e=>{var t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border font-bold lg:text-xl",children:null===(t=e.user)||void 0===t?void 0:t.name}),(0,r.jsx)("td",{className:"border",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsxs)("tr",{className:" bg-black text-white dark:bg-white dark:text-black",children:[(0,r.jsx)("th",{className:"border",children:"Item"}),(0,r.jsx)("th",{className:"border",children:"Rate"}),(0,r.jsx)("th",{className:"border",children:"Quantity"}),(0,r.jsx)("th",{className:"border",children:"Amount"})]}),e.items.map((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border",children:e.itemName}),(0,r.jsx)("td",{className:"border",children:e.itemPrice}),(0,r.jsx)("td",{className:"border",children:e.itemQuantity}),(0,r.jsx)("td",{className:"border",children:e.itemPrice*e.itemQuantity})]},"item_"+t)})),(0,r.jsxs)("tr",{className:"lg:text-xl",children:[(0,r.jsx)("th",{className:"border",colSpan:2,children:"Convinience Fee"}),(0,r.jsx)("th",{className:"border",colSpan:2,children:c/h.length})]}),(0,r.jsxs)("tr",{className:"lg:text-xl",children:[(0,r.jsx)("th",{className:"border",colSpan:2,children:"Bill Amount"}),(0,r.jsx)("th",{className:"border",colSpan:2,children:u(e.items)})]}),(0,r.jsxs)("tr",{className:"lg:text-xl",children:[(0,r.jsx)("th",{className:"border",colSpan:2,children:"Discounted Bill Amount"}),(0,r.jsxs)("th",{className:"border",colSpan:2,children:[Math.round(u(e.items)*Math.round((i-c)/d*100)/100)+c/h.length," ","- ",Math.round((i-c)/d*100)," ","%"]})]})]})})]}),(0,r.jsx)("tr",{className:"h-4"})]})})]})}let c=[{id:1,name:"Mihir"},{id:2,name:"Shivani"},{id:3,name:"Rhea"}],i=[{id:1,name:"Americano Small",price:170,quantity:5},{id:2,name:"Frappe Small",price:305,quantity:1},{id:3,name:"Add On hazelnut Flavour",price:50,quantity:1}],d=[{userId:1,items:[{itemId:1,quantity:2},{itemId:2,quantity:1},{itemId:3,quantity:1}]},{userId:2,items:[{itemId:1,quantity:3}]}],h=[{taxType:"CGST",taxPercentage:2.5},{taxType:"SGST",taxPercentage:2.5}];function m(){let[e,t]=(0,s.useState)(null),[l,a]=(0,s.useState)(null),[m,x]=(0,s.useState)(null),[u,o]=(0,s.useState)(null),[b,j]=(0,s.useState)(0),[N,p]=(0,s.useState)(0),g=(0,s.useRef)(0),S=(0,s.useRef)(0);return(0,s.useEffect)(()=>{t(c),x(h),a(i),o(d)},[]),(0,s.useEffect)(()=>{g.current=0,S.current=0,null!=l&&(null==l?void 0:l.length)>0&&(null==l||l.forEach(e=>{g.current=g.current+e.price*e.quantity}),j(g.current))},[l]),(0,s.useEffect)(()=>{null!=m&&(null==m?void 0:m.length)>0&&(null==m||m.map(e=>{S.current=S.current+g.current*(e.taxPercentage/100)}),p(Math.round(b+S.current)))},[b]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl lg:text-6xl font-bold text-center",children:"Invoice"}),(0,r.jsxs)("table",{className:"table-auto w-full text-center",children:[(0,r.jsxs)("tr",{className:"lg:text-3xl bg-black text-white dark:bg-white dark:text-black",children:[(0,r.jsx)("th",{className:"border",children:"Item"}),(0,r.jsx)("th",{className:"border",children:"Rate"}),(0,r.jsx)("th",{className:"border",children:"Quantity"}),(0,r.jsx)("th",{className:"border",children:"Amount"})]}),null!=l&&l.length>0&&l.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border",children:e.name}),(0,r.jsx)("td",{className:"border",children:e.price}),(0,r.jsx)("td",{className:"border",children:e.quantity}),(0,r.jsx)("td",{className:"border",children:e.price*e.quantity})]},"item_"+e.id)),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border lg:text-xl",colSpan:2,children:"Sub Total"}),(0,r.jsx)("th",{className:"border",colSpan:2,children:b})]}),null!=m&&m.length>0&&m.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{className:"border lg:text-xl",colSpan:2,children:[e.taxType," ",e.taxPercentage,"% on ",b]}),(0,r.jsx)("th",{className:"border",colSpan:2,children:b*(e.taxPercentage/100)})]},"tax_"+e.taxType)),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border lg:text-xl",colSpan:2,children:"Bill Total"}),(0,r.jsx)("th",{className:"border",colSpan:2,children:N})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border lg:text-xl",colSpan:2,children:"Convinience Fee"}),(0,r.jsx)("th",{className:"border",colSpan:2,children:30})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border lg:text-xl",colSpan:2,children:"Bill Paid"}),(0,r.jsxs)("th",{className:"border",colSpan:2,children:[662.5," - ",Math.round(632.5/N*100),"%"]})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(n,{users:e,items:l,itemsToUser:u,extraFee:30,billPaid:662.5,billTotal:N})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(1077)),_N_E=e.O()}]);